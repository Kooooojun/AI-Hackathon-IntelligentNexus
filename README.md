# Cooler Master AI è¨­è¨ˆå¹³å° (GenAI Hackathon å°ˆæ¡ˆ)

## ğŸ“ å°ˆæ¡ˆç°¡ä»‹

æœ¬å°ˆæ¡ˆæ—¨åœ¨éŸ¿æ‡‰ Cooler Master æ–¼ã€Œ2025 é›²æ¹§æ™ºç”Ÿï¼šè‡ºç£ç”Ÿæˆå¼ AI æ‡‰ç”¨é»‘å®¢æ¾ç«¶è³½ã€æå‡ºçš„ã€ŒCooler Master æ™ºé€ å·¥åŠã€å‘½é¡Œã€‚ç›®æ¨™æ˜¯é–‹ç™¼ä¸€å€‹ AI é©…å‹•çš„è¨­è¨ˆè¼”åŠ©å¹³å°ï¼Œæ—¨åœ¨åŠ é€Ÿ Cooler Master (ç‰¹åˆ¥æ˜¯ PC æ©Ÿæ®¼ç”¢å“) çš„æ—©æœŸè¨­è¨ˆæ¦‚å¿µç™¼æƒ³æµç¨‹ï¼Œå»ºç«‹ä¸¦åˆ©ç”¨å…¶ç¨ç‰¹çš„ç”¢å“è¨­è¨ˆ DNAï¼Œæé«˜è¨­è¨ˆæ•ˆç‡èˆ‡å‰µæ–°æ€§ï¼ŒåŒæ™‚ç¢ºä¿å“ç‰Œé¢¨æ ¼çš„ä¸€è‡´æ€§ã€‚

å¹³å°å…è¨±è¨­è¨ˆå¸«é€éæ–‡å­—æè¿°ã€é¸æ“‡é—œéµè¨­è¨ˆç‰¹å¾µï¼ˆé¢¨æ ¼ã€é¡è‰²ã€ç‡ˆæ•ˆç­‰ï¼‰ä»¥åŠä¸Šå‚³åƒè€ƒåœ–ç‰‡æˆ–è‰åœ–ä½œç‚ºè¼¸å…¥ï¼Œåˆ©ç”¨ AI æ¨¡å‹ï¼ˆAmazon Bedrockï¼‰ç”Ÿæˆæ–°çš„è¨­è¨ˆæ¦‚å¿µåœ–ã€‚å¹³å°ä¹Ÿæ”¯æŒè¨­è¨ˆå¸«å°çµæœé€²è¡Œè¿­ä»£ï¼ˆä¾‹å¦‚åŸºæ–¼æŸå¼µåœ–ç‰‡å†æ¬¡ç”Ÿæˆï¼‰å’Œæä¾›åé¥‹ã€‚

## ğŸ¬ Demo å½±ç‰‡

![å°ˆæ¡ˆ Demo](data/demo.gif)

## âœ¨ ä¸»è¦åŠŸèƒ½ (MVP åŠè¦åŠƒ)

* **AI åœ–åƒç”Ÿæˆ:**
    * æ”¯æ´**æ–‡å­—è½‰åœ–ç‰‡ (Text-to-Image)**ï¼šæ ¹æ“šæ–‡å­—æè¿°å’Œç‰¹å¾µç”Ÿæˆè¨­è¨ˆã€‚
    * æ”¯æ´**åœ–ç‰‡è½‰åœ–ç‰‡ (Image-to-Image)**ï¼šå…è¨±ä¸Šå‚³åƒè€ƒåœ–/è‰åœ– [cite: 4]ï¼Œçµåˆæ–‡å­—æè¿°é€²è¡Œä¿®æ”¹æˆ–é¢¨æ ¼è½‰æ›ã€‚
    * æ”¯æ´**è¨­è¨ˆç‰¹å¾µè¼¸å…¥:** å¯é¸æ“‡é¢¨æ ¼ã€ä¸»è¦é¡è‰²ã€ç‡ˆæ•ˆç­‰é—œéµåƒæ•¸ã€‚
    * **Prompt è¼”åŠ©:** å‰ç«¯æä¾›é—œéµå­—æ¨™ç±¤é»é¸ï¼Œè¼”åŠ©è¨­è¨ˆå¸«æ§‹å»º Promptã€‚
* **ç•°æ­¥è™•ç†èˆ‡çµæœæŸ¥è©¢:** ç”Ÿæˆè«‹æ±‚æäº¤å¾Œç«‹å³è¿”å›ä»»å‹™ IDï¼Œå‰ç«¯é€éè¼ªè©¢ (Polling) ç²å–æœ€çµ‚çš„åœ–ç‰‡çµæœã€‚
* **çµæœå±•ç¤ºèˆ‡åé¥‹:** åœ¨å‰ç«¯å±•ç¤ºç”Ÿæˆçš„åœ–ç‰‡ï¼Œä¸¦å…è¨±ä½¿ç”¨è€…æäº¤è©•åƒ¹ï¼ˆğŸ‘/ğŸ‘ï¼‰ã€‚
* **(è¦åŠƒä¸­) è¨­è¨ˆ DNA è³‡æ–™åº«:**
    * æ”¶é›†å’Œæ¨™è¨˜ Cooler Master ç”¢å“çš„è¨­è¨ˆç‰¹å¾µï¼ˆé¢¨æ ¼ã€é¡è‰²ã€ç‡ˆæ•ˆã€æè³ªã€é—œéµå­—ç­‰ï¼‰[cite: 3]ã€‚ (MVP éšæ®µæ‰‹å‹•æ¨™è¨˜)
    * æä¾›å‰ç«¯é é¢ä¾›è¨­è¨ˆå¸«ç€è¦½å’Œåƒè€ƒ DNA è³‡æ–™åº«å…§å®¹ã€‚
    * å°‡ DNA ç‰¹å¾µæ•´åˆé€² Prompt Engineï¼Œå¼•å° AI ç”Ÿæˆæ›´ç¬¦åˆå“ç‰Œé¢¨æ ¼çš„çµæœ [cite: 4]ã€‚

## ğŸ› ï¸ æŠ€è¡“æ£§ (Tech Stack)

* **å‰ç«¯ (Frontend):**
    * æ¡†æ¶: React + TypeScript
    * å»ºæ§‹å·¥å…·: Vite
    * UI åº«: Shadcn/ui (åŸºæ–¼ Radix UI & Tailwind CSS)
    * HTTP å®¢æˆ¶ç«¯: Fetch API (ç€è¦½å™¨å…§å»º)
    * ç‹€æ…‹ç®¡ç†: React Hooks (`useState`, `useRef`, `useEffect`, `useCallback`)
* **å¾Œç«¯ (Backend):**
    * æ¡†æ¶: Python + Flask
    * API æ–‡ä»¶: Flasgger (æ•´åˆ Swagger UI)
    * AWS SDK: Boto3
    * ç’°å¢ƒè®Šæ•¸ç®¡ç†: python-dotenv
* **é›²ç«¯æœå‹™ (AWS):**
    * **API é–˜é“:** Amazon API Gateway (æ¥æ”¶å‰ç«¯è«‹æ±‚ï¼Œè§¸ç™¼ Lambda)
    * **é‹ç®—:** AWS Lambda (é‹è¡Œ Flask å¾Œç«¯æ‡‰ç”¨é‚è¼¯)
    * **AI - Prompt å·¥ç¨‹:** Amazon Bedrock (ä½¿ç”¨ Claude ç­‰ LLM)
    * **AI - åœ–åƒç”Ÿæˆ:** Amazon SageMaker JumpStart (éƒ¨ç½² Stable Diffusion XL ç­‰æ¨¡å‹ï¼Œæä¾› Endpoint)
    * **å„²å­˜:** Amazon S3 (å„²å­˜ä½¿ç”¨è€…ä¸Šå‚³çš„åƒè€ƒåœ–å’Œ AI ç”Ÿæˆçš„çµæœåœ–)
    * **è³‡æ–™åº«:** Amazon DynamoDB (å„²å­˜ç•°æ­¥ä»»å‹™ç‹€æ…‹ã€ä½¿ç”¨è€…åé¥‹ã€è¨­è¨ˆ DNA è³‡æ–™)

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹æ¦‚è§€

æœ¬æ‡‰ç”¨æ¡ç”¨å‰å¾Œç«¯åˆ†é›¢æ¶æ§‹ï¼Œä¸¦åˆ©ç”¨ AWS é›²æœå‹™å¯¦ç¾ AI åŠŸèƒ½å’Œç•°æ­¥è™•ç†ï¼š

1.  **å‰ç«¯ (React/TSX)** è² è²¬ä½¿ç”¨è€…äº’å‹•ã€æ”¶é›†è¼¸å…¥ä¸¦é€é **API Gateway** ç™¼é€è«‹æ±‚ã€‚
2.  **API Gateway** å°‡è«‹æ±‚è·¯ç”±åˆ° **AWS Lambda** ä¸­é‹è¡Œçš„ **Flask** å¾Œç«¯æ‡‰ç”¨ã€‚
3.  å°æ–¼ç”Ÿæˆè«‹æ±‚ (`POST /api/generate`)ï¼š
    * Flask æ‡‰ç”¨é©—è­‰è¼¸å…¥ï¼Œ(å¯é¸)å°‡ä¸Šå‚³åœ–ç‰‡å­˜è‡³ **S3**ã€‚
    * èª¿ç”¨ **Bedrock** (LLM) æœå‹™ç”Ÿæˆå„ªåŒ–çš„ Promptã€‚
    * ç”¢ç”Ÿ `request_id`ï¼Œåœ¨ **DynamoDB** ä¸­è¨˜éŒ„ä»»å‹™åˆå§‹ç‹€æ…‹ (`processing`)ã€‚
    * è§¸ç™¼ä¸€å€‹**èƒŒæ™¯ä»»å‹™**ï¼ˆåœ¨ Lambda ä¸­ç”¨ Threading æ¨¡æ“¬ï¼Œæˆ–ç”¨ SQS/Lambda å¯¦ç¾ï¼‰ã€‚
    * **ç«‹å³**è¿”å› `request_id` çµ¦å‰ç«¯ã€‚
4.  **èƒŒæ™¯ä»»å‹™** åŸ·è¡Œï¼š
    * èª¿ç”¨ **SageMaker Endpoint** åŸ·è¡Œåœ–åƒç”Ÿæˆï¼ˆText2Img æˆ– Img2Imgï¼‰ã€‚
    * å°‡ç”Ÿæˆçš„åœ–ç‰‡å­˜å„²åˆ° **S3**ã€‚
    * æ›´æ–° **DynamoDB** ä¸­çš„ä»»å‹™ç‹€æ…‹ç‚º `succeeded` (å«åœ–ç‰‡ URL) æˆ– `failed` (å«éŒ¯èª¤è¨Šæ¯)ã€‚
5.  **å‰ç«¯** ä½¿ç”¨ `request_id` **è¼ªè©¢** `GET /api/generate/{id}` ç«¯é»ã€‚
6.  Flask æ‡‰ç”¨æŸ¥è©¢ **DynamoDB** è¿”å›ä»»å‹™ç‹€æ…‹ï¼Œç›´åˆ° `succeeded` æˆ– `failed`ã€‚
7.  å‰ç«¯ç²å–çµæœ URL ä¸¦é¡¯ç¤ºåœ–ç‰‡ã€‚
8.  å°æ–¼åé¥‹è«‹æ±‚ (`POST /api/feedback`)ï¼ŒFlask æ‡‰ç”¨ç›´æ¥å°‡æ•¸æ“šå¯«å…¥ **DynamoDB**ã€‚

(å¯ä»¥åƒè€ƒä¹‹å‰ç”Ÿæˆçš„ Mermaid åœ–è¡¨ï¼Œå°‡å…¶åœ–ç‰‡åµŒå…¥æˆ–é€£çµæ–¼æ­¤)

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
.
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt # (åˆä½µå‰å¾Œç«¯ï¼Œæˆ–å„è‡ªæœ‰)
â”œâ”€â”€ .env.example     # ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
â”‚
â”œâ”€â”€ backend/         # å¾Œç«¯ Flask æ‡‰ç”¨
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ .env.example
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ config.py
â”‚       â”œâ”€â”€ routes/      # API è·¯ç”± (generate.py, feedback.py, dna.py)
â”‚       â”œâ”€â”€ services/    # æ ¸å¿ƒé‚è¼¯ (prompt_engine.py, sagemaker_client.py)
â”‚       â”œâ”€â”€ db/          # è³‡æ–™åº«/å„²å­˜äº’å‹• (dynamo.py, s3.py)
â”‚       â””â”€â”€ utils/       # å·¥å…·å‡½æ•¸ (logger.py)
â”‚
â”œâ”€â”€ frontend/        # å‰ç«¯ React æ‡‰ç”¨
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/  # UI å…ƒä»¶ (design/, ui/, etc.)
â”‚   â”‚   â”œâ”€â”€ hooks/       # è‡ªè¨‚ Hooks (e.g., useToast)
â”‚   â”‚   â”œâ”€â”€ pages/       # é é¢å…ƒä»¶ (DnaDatabasePage.tsx)
â”‚   â”‚   â”œâ”€â”€ lib/         # å·¥å…·å‡½æ•¸ (e.g., utils.ts from shadcn)
â”‚   â”‚   â”œâ”€â”€ App.tsx      # ä¸»æ‡‰ç”¨/è·¯ç”±
â”‚   â”‚   â””â”€â”€ main.tsx     # æ‡‰ç”¨å…¥å£
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â””â”€â”€ tailwind.config.js
â”‚
â””â”€â”€ scripts/         # è¼”åŠ©è…³æœ¬
    â”œâ”€â”€ load_db.py
    â””â”€â”€ cases_data.csv
```

## âš™ï¸ è¨­å®šèˆ‡å®‰è£

**å¾Œç«¯ (Backend):**

1.  `cd backend`
2.  `python -m venv venv` (å»ºç«‹è™›æ“¬ç’°å¢ƒ)
3.  `source venv/bin/activate` (macOS/Linux) æˆ– `.\venv\Scripts\activate` (Windows) (å•Ÿç”¨è™›æ“¬ç’°å¢ƒ)
4.  `pip install -r requirements.txt` (å®‰è£ä¾è³´)
5.  è¤‡è£½ `.env.example` ç‚º `.env` (`cp .env.example .env`)
6.  ç·¨è¼¯ `.env` æª”æ¡ˆã€‚

**å‰ç«¯ (Frontend):**

1.  `cd frontend`
2.  `npm install` (æˆ– `yarn install`) (å®‰è£ä¾è³´)
3.  è¤‡è£½ `.env.example` (å¦‚æœæœ‰çš„è©±) ç‚º `.env.local`
4.  ç·¨è¼¯ `.env.local` æª”æ¡ˆï¼Œè¨­å®š `VITE_BACKEND_API_URL` æŒ‡å‘ä½ çš„å¾Œç«¯åœ°å€ (ä¾‹å¦‚ `http://127.0.0.1:8000`)ã€‚

## â–¶ï¸ æœ¬åœ°é‹è¡Œ

1.  **å•Ÿå‹•å¾Œç«¯:**
    * é–‹å•Ÿä¸€å€‹çµ‚ç«¯æ©Ÿã€‚
    * `cd backend`
    * `source venv/bin/activate` (æˆ– Windows çš„ activate)
    * `python main.py`
    * å¾Œç«¯é è¨­é‹è¡Œåœ¨ `http://127.0.0.1:8000`ï¼ŒAPI æ–‡ä»¶åœ¨ `http://127.0.0.1:8000/docs/`ã€‚

2.  **å•Ÿå‹•å‰ç«¯:**
    * é–‹å•Ÿ**å¦ä¸€å€‹**çµ‚ç«¯æ©Ÿã€‚
    * `cd frontend`
    * `npm run dev` (æˆ– `yarn dev`)
    * å‰ç«¯é è¨­é‹è¡Œåœ¨ `http://localhost:8080` (æˆ–å…¶ä»– Vite æŒ‡å®šçš„ç«¯å£)ã€‚
    * åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹å‰ç«¯åœ°å€å³å¯é–‹å§‹ä½¿ç”¨ã€‚
  



## å¾Œç«¯é‡å»º (Backend Rebuild - v2 )

ä¸»è¦ç›®æ¨™ï¼š
* ä½¿ç”¨grokç”Ÿæˆåœ–ç‰‡ï¼Œè³‡æ–™å­˜åœ¨supabase + èƒŒæ™¯ Worker æ¨¡å¼ã€‚
* å¼•å…¥èº«ä»½é©—è­‰ (Admin/Demo æ¨¡å¼)ã€‚
* ä½¿ç”¨ Celery è™•ç†èƒŒæ™¯åœ–ç‰‡ç”Ÿæˆä»»å‹™ã€‚
* æ•´åˆ Flasgger æä¾› API æ–‡ä»¶ã€‚

ç›®å‰çš„ç‹€æ…‹ï¼š
* å¾Œç«¯ä¼ºæœå™¨å·²å¯é‹è¡Œã€‚
* API æ–‡ä»¶å¯åœ¨ /apidocs/ æŸ¥çœ‹ã€‚

## v2 å°ˆæ¡ˆç›®éŒ„ï¼š
```
.
â”œâ”€â”€ .gitignore                     # æŒ‡å®š Git å¿½ç•¥è¿½è¹¤çš„æ–‡ä»¶å’Œç›®éŒ„ (ä¾‹å¦‚ .env, node_modules, __pycache__)
â”œâ”€â”€ README.md                      # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶ (å¦‚ä½•å®‰è£ã€å•Ÿå‹•ã€éƒ¨ç½²ç­‰)
â”œâ”€â”€ docker-compose.yml             # (å¯é¸) ä½¿ç”¨ Docker Compose çµ±ä¸€éƒ¨ç½²/é–‹ç™¼ç’°å¢ƒ (å¾Œç«¯, Worker, Redis éšŠåˆ—ç­‰)
â”‚
â”œâ”€â”€ backend/                       # å¾Œç«¯æ‡‰ç”¨ (ä¾‹å¦‚ Flask æˆ– FastAPI) - è™•ç† API è«‹æ±‚ã€æ¥­å‹™é‚è¼¯ã€èº«ä»½é©—è­‰/æˆæ¬Š
â”‚   â”œâ”€â”€ run.py                     # å•Ÿå‹•å¾Œç«¯ä¼ºæœå™¨çš„è…³æœ¬ (ä¾‹å¦‚ `flask run` æˆ– `uvicorn main:app`)
â”‚   â”œâ”€â”€ requirements.txt           # å¾Œç«¯ Python ä¾è³´åº«åˆ—è¡¨
â”‚   â”œâ”€â”€ .env.example               # å¾Œç«¯ç’°å¢ƒè®Šæ•¸ç¯„æœ¬ (Supabase URL/Key, Grok API Key, JWT Secret, Admin Role ID, Redis URL ç­‰)
â”‚   â””â”€â”€ app/                       # Flask/FastAPI æ‡‰ç”¨ç¨‹å¼ç¢¼
â”‚       â”œâ”€â”€ __init__.py            # å°‡ app ç›®éŒ„æ¨™è¨˜ç‚º Python åŒ…ï¼Œå¯åŒ…å« Flask app factory
â”‚       â”œâ”€â”€ config.py              # åŠ è¼‰å’Œç®¡ç†æ‡‰ç”¨é…ç½® (å¾ .env è®€å–)
â”‚       â”œâ”€â”€ routes/                # API è·¯ç”±å®šç¾©
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ generate.py        # è™•ç† /api/generate ç›¸é—œè·¯ç”± (POST å’Œ GET /{id})
â”‚       â”œâ”€â”€ services/              # æ ¸å¿ƒæ¥­å‹™é‚è¼¯
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ generation.py      # è™•ç†ç”Ÿæˆè«‹æ±‚çš„æ ¸å¿ƒé‚è¼¯ (èª¿ç”¨ Grok Vision/LLM, è§¸ç™¼ Worker)
â”‚       â”‚   â”œâ”€â”€ auth.py            # è™•ç† JWT é©—è­‰ã€è§’è‰²æª¢æŸ¥é‚è¼¯
â”‚       â”‚   â”œâ”€â”€ task.py            # å°è£å°‡ä»»å‹™ç™¼é€åˆ°èƒŒæ™¯éšŠåˆ— (Redis/Celery) çš„é‚è¼¯
â”‚       â”‚   â””â”€â”€ grok.py            # å°è£èª¿ç”¨ Grok API (Vision, LLM) çš„å®¢æˆ¶ç«¯é‚è¼¯
â”‚       â”œâ”€â”€ db/                    # æ•¸æ“šåº«å’Œå­˜å„²äº¤äº’ (Supabase)
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ supabase_client.py # åˆå§‹åŒ– Supabase å®¢æˆ¶ç«¯ï¼Œæä¾› DB å’Œ Storage çš„äº¤äº’å‡½æ•¸
â”‚       â”œâ”€â”€ middleware/            # ä¸­é–“ä»¶
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ auth_middleware.py # åŸ·è¡Œ JWT èº«ä»½é©—è­‰å’Œ Admin è§’è‰²æˆæ¬Šæª¢æŸ¥
â”‚       â”œâ”€â”€ models/                # (å¯é¸) å®šç¾©æ•¸æ“šæ¨¡å‹/çµæ§‹ (ä¾‹å¦‚ Pydantic schemas)
â”‚       â””â”€â”€ utils/                 # é€šç”¨å·¥å…·å‡½æ•¸ (ä¾‹å¦‚ logger.py)
â”‚
â”œâ”€â”€ frontend/                      # å‰ç«¯æ‡‰ç”¨ (ä¾‹å¦‚ React/Vite) - ç”¨æˆ¶ç•Œé¢ã€ç‹€æ…‹ç®¡ç†ã€èˆ‡å¾Œç«¯ API äº¤äº’
â”‚   â”œâ”€â”€ public/                    # éœæ…‹è³‡æº (ä¾‹å¦‚ index.html, favicons)
â”‚   â”‚   â””â”€â”€ images/                # å­˜æ”¾ Demo æ¨¡å¼ä½¿ç”¨çš„ä½”ä½ç¬¦åœ–ç‰‡ (e.g., demo-placeholder.jpg)
â”‚   â”œâ”€â”€ src/                       # React æ‡‰ç”¨æºç¢¼
â”‚   â”‚   â”œâ”€â”€ components/            # å¯é‡ç”¨ UI å…ƒä»¶ (ä¾‹å¦‚ Button, Card, Input)
â”‚   â”‚   â”‚   â””â”€â”€ specific/          # ç‰¹å®šé é¢æˆ–åŠŸèƒ½çš„å…ƒä»¶ (e.g., GenerationForm, ImageResultDisplay)
â”‚   â”‚   â”‚   â””â”€â”€ ui/                # åŸºç¤ UI åº«å…ƒä»¶ (e.g., from shadcn/ui)
â”‚   â”‚   â”‚   â””â”€â”€ DemoBanner.tsx     # (æ–°å¢) ç”¨æ–¼é¡¯ç¤º "Demo Mode" çš„æ©«å¹…
â”‚   â”‚   â”œâ”€â”€ contexts/              # (æˆ– store/) React Context æˆ–å…¶ä»–ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ AuthContext.tsx    # (æ–°å¢) ç®¡ç†ç”¨æˆ¶èªè­‰ç‹€æ…‹ (isAuthenticated) å’Œè§’è‰² (isAdmin)
â”‚   â”‚   â”œâ”€â”€ hooks/                 # è‡ªå®šç¾© React Hooks
â”‚   â”‚   â”‚   â””â”€â”€ useAuth.ts         # (æ–°å¢) å°è£è®€å– AuthContext ç‹€æ…‹çš„é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ pages/                 # é é¢ç´šå…ƒä»¶
â”‚   â”‚   â”‚   â””â”€â”€ GeneratePage.tsx   # ä¸»è¦çš„åœ–ç‰‡ç”Ÿæˆé é¢
â”‚   â”‚   â”‚   â””â”€â”€ LoginPage.tsx      # (æ–°å¢) ç”¨æˆ¶ç™»éŒ„é é¢
â”‚   â”‚   â”œâ”€â”€ services/              # å°è£èˆ‡å¤–éƒ¨äº¤äº’çš„é‚è¼¯
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts             # èª¿ç”¨çœŸå¯¦å¾Œç«¯ API çš„å‡½æ•¸
â”‚   â”‚   â”‚   â”œâ”€â”€ mockApi.ts         # (æ–°å¢) æ¨¡æ“¬å¾Œç«¯ API è¡Œç‚ºçš„å‡½æ•¸ (ç”¨æ–¼ Demo Mode)
â”‚   â”‚   â”‚   â””â”€â”€ supabase.ts        # åˆå§‹åŒ– Supabase å‰ç«¯å®¢æˆ¶ç«¯ (ä¸»è¦ç”¨æ–¼ Auth)
â”‚   â”‚   â”œâ”€â”€ lib/                   # é€šç”¨å·¥å…·å‡½æ•¸ (ä¾‹å¦‚ utils.ts)
â”‚   â”‚   â”œâ”€â”€ App.tsx                # ä¸»æ‡‰ç”¨çµ„ä»¶ï¼ŒåŒ…å«è·¯ç”±è¨­ç½®ã€å…¨å±€ä½ˆå±€ã€ç‹€æ…‹æä¾›è€…
â”‚   â”‚   â””â”€â”€ main.tsx               # æ‡‰ç”¨å…¥å£é»ï¼Œæ¸²æŸ“ App å…ƒä»¶
â”‚   â”œâ”€â”€ index.html                 # Vite å…¥å£ HTML
â”‚   â”œâ”€â”€ package.json               # å‰ç«¯é …ç›®ä¾è³´å’Œè…³æœ¬
â”‚   â”œâ”€â”€ vite.config.ts             # Vite é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ tailwind.config.js         # Tailwind CSS é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ .env.example               # å‰ç«¯ç’°å¢ƒè®Šæ•¸ç¯„æœ¬ (VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY)
â”‚
â”œâ”€â”€ worker/                        # èƒŒæ™¯å·¥ä½œè™•ç†å™¨ (ä¾‹å¦‚ Celery æˆ– RQ) - åŸ·è¡Œè€—æ™‚ä»»å‹™
â”‚   â”œâ”€â”€ run_worker.sh              # (æˆ– run.py) å•Ÿå‹• Worker é€²ç¨‹çš„è…³æœ¬
â”‚   â”œâ”€â”€ requirements.txt           # Worker Python ä¾è³´åº«åˆ—è¡¨ (Celery/RQ, Supabase client, Grok client)
â”‚   â”œâ”€â”€ .env.example               # Worker ç’°å¢ƒè®Šæ•¸ç¯„æœ¬ (Supabase URL/Key, Grok API Key, Redis URL)
â”‚   â”œâ”€â”€ celery_app.py              # (å¦‚æœä½¿ç”¨ Celery) Celery app å¯¦ä¾‹åŒ–å’Œé…ç½®
â”‚   â””â”€â”€ tasks.py                   # å®šç¾©èƒŒæ™¯ä»»å‹™å‡½æ•¸
â”‚       â””â”€â”€ generation_task.py     # (ä¾‹å¦‚) å¯¦éš›åŸ·è¡Œåœ–ç‰‡ç”Ÿæˆä»»å‹™çš„å‡½æ•¸:
â”‚                                  #   1. æ¥æ”¶ request_id, prompt ç­‰åƒæ•¸
â”‚                                  #   2. èª¿ç”¨ Grok Image Gen API
â”‚                                  #   3. (å¯é¸) å°‡çµæœä¸Šå‚³åˆ° Supabase Storage
â”‚                                  #   4. æ›´æ–° Supabase DB ä¸­çš„è«‹æ±‚ç‹€æ…‹ (succeeded/failed) å’Œçµæœ URL
â”‚       â””â”€â”€ clients/               # (å¯é¸) å¦‚æœä¸ä½¿ç”¨ shared libraryï¼Œå¯ä»¥åœ¨æ­¤è™•æ”¾å®¢æˆ¶ç«¯ä»£ç¢¼
â”‚           â””â”€â”€ supabase_client.py
â”‚           â””â”€â”€ grok_client.py
â”‚
â”œâ”€â”€ shared/                        # (å¯é¸ä½†æ¨è–¦) å¾Œç«¯å’Œ Worker å…±ç”¨çš„ä»£ç¢¼åº«
â”‚   â”œâ”€â”€ setup.py / pyproject.toml  # ä½¿å…¶æˆç‚ºå¯å®‰è£çš„ Python åŒ…
â”‚   â””â”€â”€ shared_lib/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ supabase/              # å…±ç”¨çš„ Supabase å®¢æˆ¶ç«¯é‚è¼¯
â”‚       â”‚   â””â”€â”€ client.py
â”‚       â”œâ”€â”€ grok/                  # å…±ç”¨çš„ Grok å®¢æˆ¶ç«¯é‚è¼¯
â”‚       â”‚   â””â”€â”€ client.py
â”‚       â””â”€â”€ models/                # å…±ç”¨çš„æ•¸æ“šæ¨¡å‹ (ä¾‹å¦‚ Pydantic)
â”‚
â””â”€â”€ scripts/                     # é–‹ç™¼æˆ–ç¶­è­·ç”¨çš„è¼”åŠ©è…³æœ¬
    â”œâ”€â”€ setup_admin.py             # (æ–°å¢) ç”¨æ–¼è¨­ç½® Supabase ç”¨æˆ¶è§’è‰²çš„è…³æœ¬
    â”œâ”€â”€ load_db.py               # (ä¿ç•™) å¯èƒ½ç”¨æ–¼åŠ è¼‰åˆå§‹æ•¸æ“š
    â””â”€â”€ cases_data.csv           # (ä¿ç•™) ç¯„ä¾‹æ•¸æ“š
```
   

## å¾ªåºåœ–(Sequence Diagram)
å¯ä»¥æŸ¥çœ‹ [Eraser.io](https://app.eraser.io/workspace/PhcYTxWOFxbesc9uRrLT?origin=share)ç¶²é ç‰ˆé€²è¡Œç¸®æ”¾ã€‚

![sequence diagram](data/sequence_diagram.png)
